import{r,j as e,R as z}from"./react-0c77c144.js";import{c as Q}from"./react-dom-964364ba.js";import{R as D,a as I,b as P,c as $}from"./recoil-30246499.js";import{r as t}from"./@material-tailwind-09403f25.js";import{r as ee}from"./randomcolor-38ee50fd.js";import{m as O}from"./mapbox-gl-8de1b415.js";import{d as te}from"./react-timer-hook-679e9270.js";import{P as se,a as re,A as ae,T as J,b as G,W as U,c as ne,d as oe,R as ce,C as ie,B as le,e as de,f as me,S as he}from"./@heroicons-3de99253.js";import{i as ue,g as xe,o as pe,s as ge,a as fe}from"./@firebase-78a613ce.js";import"./firebase-4eeb31d4.js";import{l as ye}from"./react-joystick-component-2aa7cd53.js";import{c as H,d as Z,O as je,e as Ne,f as T}from"./react-router-2a15238e.js";import{R as ve,L as be,a as Ce,C as we,X as Se,Y as ke,T as Le}from"./recharts-624c24e9.js";import{B as Te,A as Ee}from"./react-icons-0a8c3f43.js";import{N as R,B as Ie}from"./react-router-dom-c3df4f81.js";import"./@babel-87174ba5.js";import"./scheduler-765c72db.js";import"./classnames-cd41178b.js";import"./tailwind-merge-de5f6af3.js";import"./prop-types-14c30b34.js";import"./deepmerge-89e33937.js";import"./framer-motion-3ab52292.js";import"./tslib-b2c16c9a.js";import"./hey-listen-52bbde7e.js";import"./style-value-types-86c13b32.js";import"./popmotion-413bcd9d.js";import"./framesync-409e5dda.js";import"./@motionone-95e9e256.js";import"./@emotion-cde29e94.js";import"./material-ripple-effects-ffa693ae.js";import"./@floating-ui-6cb3404f.js";import"./idb-81bdbf9b.js";import"./@remix-run-3c3b6866.js";import"./react-resize-detector-b39efbfc.js";import"./lodash-1234520e.js";import"./react-smooth-c290c57b.js";import"./fast-equals-a0711cdd.js";import"./victory-vendor-5e3e398c.js";import"./d3-scale-4cce9527.js";import"./internmap-7949acc8.js";import"./d3-array-7d9b19f9.js";import"./d3-time-format-aa787c71.js";import"./d3-time-9ce187c0.js";import"./d3-interpolate-8fa1f6ff.js";import"./d3-color-6502c434.js";import"./d3-format-ffdb8652.js";import"./recharts-scale-170b47f7.js";import"./decimal.js-light-6fe16ef2.js";import"./react-is-e8e5dbb3.js";import"./d3-shape-9e788a4f.js";import"./d3-path-41c4cb36.js";import"./reduce-css-calc-b30b9425.js";import"./css-unit-converter-9e08bb2c.js";import"./eventemitter3-40d30422.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}})();const F=D({key:"waypointState",default:[]});O.accessToken="pk.eyJ1IjoiYmF0eXJraCIsImEiOiJjbGljcHo3ZDAwcTNlM2V0ZTRtemk1ODRmIn0.t-G-2NoT-mvCYOpK-FTLjA";const Re=({longitude:a,latitude:n})=>{const i=r.useRef(null),c=r.useRef(null),[o,s]=r.useState(a),[l,N]=r.useState(n),[m,p]=r.useState(16),[d,f]=I(F),[u,h]=r.useState(),[b,S]=r.useState([]),g=()=>{b.length&&(b.forEach(C=>{C.remove()}),S([]))},y=C=>{f(w=>[...w,C])};r.useEffect(()=>{c.current||(c.current=new O.Map({container:i.current,style:"mapbox://styles/mapbox/light-v11",center:[o,l],zoom:m}),c.current.on("move",()=>{s(c.current.getCenter().lng.toFixed(4)),N(c.current.getCenter().lat.toFixed(4)),p(c.current.getZoom().toFixed(2))}),h(new O.Marker({color:"white"}).setLngLat([o,l]).addTo(c.current)),c.current.on("contextmenu",C=>y({latitude:C.lngLat.lat,longitude:C.lngLat.lng,color:ee()})))});const v=(C,w)=>{f(E=>{let L=[...E];return L[C]=w,L})};return r.useEffect(()=>{c.current&&(u==null||u.setLngLat([a,n]))},[a,n]),r.useEffect(()=>{if(!c.current)return;(()=>{g(),d.forEach((w,E)=>{let L=new O.Marker({color:w==null?void 0:w.color}).setDraggable(!0).setLngLat([w.longitude,w.latitude]).addTo(c.current);L.on("dragend",()=>{let x=L.getLngLat(),j={latitude:x.lat,longitude:x.lng,color:w==null?void 0:w.color};v(E,j)}),S(x=>[...x,L])})})()},[d]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-800 text-xs text-white px-1.5 py-3 z-10 absolute m-3 rounded",children:["Latitude: ",l," | Longitude: ",o," | Zoom: ",m]}),e.jsx("div",{ref:i,className:"h-[500px]"})]})},Oe=()=>{const{seconds:a,minutes:n,hours:i,isRunning:c,start:o,pause:s,reset:l}=te.useStopwatch({autoStart:!1});return e.jsxs("div",{className:"text-center text-white",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs(t.Typography,{variant:"h1",children:[i.toString().padStart(2,"0"),":",n.toString().padStart(2,"0"),":",a.toString().padStart(2,"0")]}),e.jsx(t.Typography,{variant:"paragraph",children:"HH:MM:SS"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[c?e.jsx(t.Button,{variant:"outlined",color:"white",className:"flex items-center",onClick:s,children:e.jsx(re,{strokeWidth:2,className:"h-5 w-5"})}):e.jsx(t.Button,{variant:"outlined",color:"white",className:"flex items-center",onClick:o,children:e.jsx(se,{strokeWidth:2,className:"h-5 w-5"})}),e.jsx(t.Button,{variant:"outlined",color:"white",className:"flex items-center",onClick:()=>l(null,!1),children:e.jsx(ae,{strokeWidth:2,className:"h-5 w-5"})})]})]})},Pe={apiKey:"AIzaSyB6lJ4-btPJrun3egZ-OHVB2x_GHqON080",authDomain:"consolecsi-auth.firebaseapp.com",projectId:"consolecsi-auth",storageBucket:"consolecsi-auth.appspot.com",messagingSenderId:"1060020195005",appId:"1:1060020195005:web:16f958fcfde05c891bb1d4"},De=ue(Pe),W=xe(De),K=r.createContext(),Me=({children:a})=>{const[n,i]=r.useState({}),c=(s,l)=>ge(W,s,l),o=()=>fe(W);return r.useEffect(()=>{const s=pe(W,l=>{i(l)});return()=>{s()}},[]),e.jsx(K.Provider,{value:{user:n,signIn:c,logout:o},children:a})},M=()=>r.useContext(K),Y=r.createContext(),Be=({children:a})=>{const{user:n}=M(),[i,c]=r.useState(WebSocket.CLOSED),[o,s]=r.useState(null),l=r.useRef(null),N=()=>{const f=new WebSocket("wss://mrbwjuh5n3.execute-api.eu-north-1.amazonaws.com/prod");f.onopen=()=>{c(f.OPEN)},f.onclose=()=>{c(f.CLOSED)},f.onmessage=u=>{let h=JSON.parse(u.data);console.log("got data obj: ",h),s(h)},l.current=f},m=()=>{(!l.current||l.current.readyState===WebSocket.CLOSED)&&N()},p=()=>{l.current&&l.current.readyState===WebSocket.OPEN&&l.current.close()},d=f=>{var h,b,S;let u={action:"send",message:JSON.stringify(f)};((h=l.current)==null?void 0:h.readyState)===((b=l.current)==null?void 0:b.OPEN)&&((S=l.current)==null||S.send(JSON.stringify(u)))};return r.useEffect(()=>{if(!(!n||!n.email))return m(),()=>{p()}},[n]),e.jsx(Y.Provider,{value:{readyState:i,data:o,sendMessage:d,openConnection:m,closeConnection:p},children:a})},B=()=>r.useContext(Y),We=()=>{const a={latitude:"51.090009",longitude:"71.398299"},{readyState:n,data:i}=B(),[c,o]=r.useState(a),[s,l]=r.useState({}),[N,m]=I(F),[p,d]=r.useState(""),[f,u]=r.useState(""),[h,b]=r.useState("#3FB1CE"),S=x=>{x.preventDefault(),p.length&&f.length&&m([...N,{latitude:p,longitude:f,color:h}]),d(""),u(""),x.target.reset()},g=x=>{let j=[...N];j.splice(x,1),m(j)},y=(x,j)=>{let k=[...N];k[x]=j,m(k)},v=r.useRef(),C=r.useRef(),w=(x,j)=>{v.current=j},E=(x,j)=>{C.current=j},L=x=>{const j=[...N],k=j[v.current];j.splice(v.current,1),j.splice(C.current,0,k),v.current=null,C.current=null,m(j)};return r.useEffect(()=>{var x,j;n===WebSocket.OPEN&&i&&i.gps&&((x=i.gps)==null?void 0:x.latitude)!=c.latitude&&((j=i.gps)==null?void 0:j.longitude)!=c.longitude&&o(i.gps)},[n,i]),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 grid-flow-row-dense",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 h-fit",children:[e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"IMU Data"}),e.jsxs(t.Typography,{color:"white",className:"text-xl",children:["Linear Acceleration: ",(s==null?void 0:s.linear_acceleration)??"0"]}),e.jsxs(t.Typography,{color:"white",className:"text-xl",children:["Angular Velocity: ",(s==null?void 0:s.angular_velocity)??"0"]}),e.jsxs(t.Typography,{color:"white",className:"text-xl",children:["Orientation: ",(s==null?void 0:s.orientation)??"NE"]})]})}),e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"text-primary font-heading text-center",children:"Stopwatch"}),e.jsx(Oe,{})]})}),e.jsx(t.Card,{className:"bg-secondary col-span-2",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Waypoints"}),e.jsx(t.List,{className:"h-64 overflow-y-auto",children:N.length?N.map((x,j)=>e.jsxs(t.ListItem,{ripple:!1,className:"py-1 pr-1 pl-4 text-white bg-[#474b4f]",draggable:!0,onDragStart:k=>w(k,j),onDragEnter:k=>E(k,j),onDragEnd:L,children:[e.jsxs("span",{className:"text-martian mr-2",children:["[",j+1,"]"]}),"Latitude: ",Number(x.latitude).toFixed(4),", Longitude: ",Number(x.longitude).toFixed(4),e.jsxs(t.ListItemSuffix,{className:"flex justify-center space-x-4",children:[e.jsx("input",{type:"color",value:x.color,onChange:k=>{let q={latitude:x.latitude,longitude:x.longitude,color:k.target.value};y(j,q)}}),e.jsx(t.IconButton,{variant:"text",color:"blue-gray",onClick:()=>g(j),children:e.jsx(J,{className:"h-5 w-5"})})]})]},j)):e.jsx(t.Typography,{color:"white",className:"text-lg text-center",children:"No waypoints on the map"})}),e.jsxs("form",{className:"mt-3 flex gap-2 items-center",onSubmit:S,children:[e.jsx(t.Input,{label:"Latitude",color:"white",onChange:x=>d(x.target.value)}),e.jsx(t.Input,{label:"Longitude",color:"white",onChange:x=>u(x.target.value)}),e.jsx(t.Input,{label:"Color",color:"white",type:"color",value:h,onChange:x=>b(x.target.value),containerProps:{className:"max-w-[100px]"}}),e.jsx(t.Button,{className:"col-span-3",type:"submit",color:"green",children:e.jsx(G,{className:"h-4"})})]})]})})]}),e.jsx("div",{className:"grid grid-rows-1 gap-4",children:e.jsx(t.Card,{className:"bg-secondary ",children:e.jsxs(t.CardBody,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Location"})}),e.jsx(Re,{latitude:c.latitude,longitude:c.longitude}),e.jsxs(t.Typography,{className:"mt-4 text-center",color:"white",children:["Rover's Location (",c.latitude,", ",c.longitude,")"]})]})})})]})},V=D({key:"receiveFootageState",default:!0}),Ae=({mediaStream:a})=>{const n=r.useRef(null),i=P(V);return r.useEffect(()=>{n.current&&(a!==null?n.current.srcObject=a:n.current.srcObject&&a===null&&(n.current.srcObject.getTracks().forEach(c=>c.stop()),n.current.srcObject=null))},[a]),i&&a?e.jsx("video",{autoPlay:!0,controls:!0,ref:n}):e.jsx("div",{className:"h-[480px] w-full bg-black flex justify-center items-center",children:i?e.jsx(t.Typography,{variant:"h3",className:"text-primary",children:"No Footage From Cameras"}):e.jsx(t.Typography,{variant:"h3",className:"text-primary",children:"Footage Receival is turned off"})})},Fe=()=>{const{sendMessage:a}=B(),n=new Map([["W",87],["A",65],["S",83],["D",68]]),[i,c]=r.useState({x:0,y:0});let o={};const s=m=>{let p={x:m.x,y:m.y};o.x===p.x&&o.y===p.y||(o=p,a({control:p}))},l=m=>{let p=m.keyCode,d={x:0,y:0};switch(p){case n.get("W"):d.x=0,d.y=1;break;case n.get("A"):d.x=-1,d.y=0;break;case n.get("S"):d.x=0,d.y=-1;break;case n.get("D"):d.x=1,d.y=0;break}c(d),(d.x||d.y)&&s({x:d.x,y:d.y})},N=m=>{let p=m.keyCode;(p===87||p===65||p===83||p===68)&&(c({x:0,y:0}),s({x:0,y:0}))};return r.useEffect(()=>(document.addEventListener("keydown",l),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",N)}),[]),e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-4 text-primary font-heading",children:"Manual Control"}),e.jsxs("div",{className:"flex flex-col gap-4 items-center my-2",children:[e.jsx(ye.Joystick,{pos:i,size:100,stickSize:50,baseColor:"black",stickColor:"#29EB18",move:s}),e.jsx(t.Typography,{color:"white",children:"Movement"}),e.jsxs(t.Typography,{color:"white",children:["Forward - [W], Backward - [S]",e.jsx("br",{}),"Left - [A], Right - [D]"]})]})]})})},X=r.createContext(),_e=({children:a})=>{const{readyState:n,data:i,sendMessage:c}=B(),[o,s]=r.useState(null),[l,N]=r.useState(null),[m,p]=r.useState(),d=r.useRef(null),f=u=>{s(u)};return r.useEffect(()=>{n===WebSocket.OPEN&&i&&i.webrtc_offer!=o&&s(JSON.stringify(i.webrtc_offer))},[n,i]),r.useEffect(()=>{const u=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});return u.onicecandidate=function(h){let b=h.candidate;b?console.log(b.candidate):console.log(`iceGatheringState complete
`,d.current.localDescription.sdp)},u.oniceconnectionstatechange=function(){p(d.current.iceConnectionState)},u.ontrack=function(h){console.log("remote ontrack",h.streams),N(h.streams[0])},u.onconnection=function(h){console.log("onconnection ",h)},d.current=u,()=>{d.current.close()}},[]),r.useEffect(()=>{if(!d.current||!o)return;let u=new RTCSessionDescription(JSON.parse(o));console.log(`remoteOffer 
`,u),d.current.setRemoteDescription(u).then(function(){u.type=="offer"&&d.current.createAnswer().then(function(h){console.log(`createAnswer 200 ok 
`,h),c({webrtc_answer:h}),d.current.setLocalDescription(h).then(function(){}).catch(b=>console.log(b))}).catch(h=>console.log(h))}).catch(h=>console.log(h))},[o]),e.jsx(X.Provider,{value:{changeRemoteOffer:f,remoteStream:l,iceState:m},children:a})},ze=()=>r.useContext(X),_=D({key:"controlModeState",default:!1}),Je=({open:a,onClose:n,heading:i,text:c,onConfirm:o})=>a&&e.jsxs(t.Dialog,{open:a,handler:n,children:[e.jsx(t.DialogHeader,{children:i??"Confirmation"}),e.jsx(t.DialogBody,{children:c??"Do you confirm the action?"}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:n,className:"mr-1",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:()=>{n(),o()},children:e.jsx("span",{children:"Confirm"})})]})]}),Ge=()=>{const[a,n]=I(_),[i,c]=I(V),[o,s]=z.useState(!1),l=m=>{s(!0)},N=m=>{c(m.target.checked)};return e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{className:"flex flex-col gap-4",children:[e.jsx(t.Typography,{variant:"h4",className:"text-primary font-heading",children:"Configs"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Je,{open:o,onClose:()=>s(!1),onConfirm:()=>n(!a),heading:"Switch Control Mode?"}),e.jsx(t.Typography,{variant:"h5",color:"white",children:"Drive mode:"}),e.jsx(t.Typography,{color:"white",children:"Manual"}),e.jsx(t.Switch,{id:"control-mode-switch",checked:a,onChange:l,ripple:!1,className:"h-full w-full checked:bg-primary",containerProps:{className:"w-11 h-6"},circleProps:{className:"before:hidden left-0.5 border-none"}}),e.jsx(t.Typography,{color:"white",children:"Autonomous"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t.Typography,{variant:"h5",color:"white",children:"Receive camera footage:"}),e.jsx(t.Switch,{id:"recieve-footage-switch",checked:i,onChange:N,ripple:!1,className:"h-full w-full checked:bg-primary",containerProps:{className:"w-11 h-6"},circleProps:{className:"before:hidden left-0.5 border-none"}})]})]})})},Ue=()=>{const[a,n]=I(F),[i,c]=r.useState(""),[o,s]=r.useState(""),[l,N]=r.useState("#3FB1CE"),m=g=>{g.preventDefault(),i.length&&o.length&&n([...a,{latitude:i,longitude:o,color:l}]),c(""),s(""),g.target.reset()},p=g=>{let y=[...a];y.splice(g,1),n(y)},d=(g,y)=>{let v=[...a];v[g]=y,n(v)},f=r.useRef(),u=r.useRef(),h=(g,y)=>{f.current=y},b=(g,y)=>{u.current=y},S=g=>{const y=[...a],v=y[f.current];y.splice(f.current,1),y.splice(u.current,0,v),f.current=null,u.current=null,n(y)};return e.jsx(t.Card,{className:"bg-secondary col-span-2",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Waypoints"}),e.jsx(t.List,{className:"h-64 overflow-y-auto",children:a.length?a.map((g,y)=>e.jsxs(t.ListItem,{ripple:!1,className:"py-1 pr-1 pl-4 text-white bg-[#474b4f]",draggable:!0,onDragStart:v=>h(v,y),onDragEnter:v=>b(v,y),onDragEnd:S,children:[e.jsxs("span",{className:"text-martian mr-2",children:["[",y+1,"]"]}),"Latitude: ",Number(g.latitude).toFixed(4),", Longitude: ",Number(g.longitude).toFixed(4),e.jsxs(t.ListItemSuffix,{className:"flex justify-center space-x-4",children:[e.jsx("input",{type:"color",value:g.color,onChange:v=>{let C={latitude:g.latitude,longitude:g.longitude,color:v.target.value};d(y,C)}}),e.jsx(t.IconButton,{variant:"text",color:"blue-gray",onClick:()=>p(y),children:e.jsx(J,{className:"h-5 w-5"})})]})]},y)):e.jsx(t.Typography,{color:"white",className:"text-lg text-center",children:"No waypoints on the map"})}),e.jsxs("form",{className:"mt-3 flex gap-2 items-center",onSubmit:m,children:[e.jsx(t.Input,{label:"Latitude",color:"white",onChange:g=>c(g.target.value)}),e.jsx(t.Input,{label:"Longitude",color:"white",onChange:g=>s(g.target.value)}),e.jsx(t.Input,{label:"Color",color:"white",type:"color",value:l,onChange:g=>N(g.target.value),containerProps:{className:"max-w-[100px]"}}),e.jsx(t.Button,{className:"col-span-3",type:"submit",color:"green",children:e.jsx(G,{className:"h-4"})})]})]})})},He=()=>{const[a,n]=r.useState(""),{changeRemoteOffer:i,remoteStream:c,iceState:o}=ze(),s=P(_);return r.useEffect(()=>{console.log("Ice state: "+o)},[o]),e.jsxs("div",{className:"mt-4 grid grid-cols-11 gap-4",children:[e.jsx("div",{className:"col-span-5",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(Ge,{}),s?e.jsx(Ue,{}):e.jsx(Fe,{})]})}),e.jsx("div",{className:"col-span-6",children:e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Main Camera"}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Ae,{mediaStream:c})}),e.jsx("textarea",{value:a,onChange:l=>n(l.target.value)}),e.jsx("button",{onClick:()=>i(a),children:"Answer"})]})})})]})},A=()=>e.jsx(t.Card,{color:"gray",className:"",children:e.jsx(t.CardBody,{className:"flex justify-center items-center",children:e.jsx(t.Typography,{variant:"h4",color:"white",className:"font-heading",children:"Feature not yet implemented!"})})}),Ze=()=>{const{readyState:a,openConnection:n,closeConnection:i}=B(),{user:c,logout:o}=M(),s=H(),l=async()=>{try{await o(),s("/login")}catch(y){console.error(y)}},N={1:"OPEN",3:"CLOSED"}[a],[m,p]=r.useState(0),[d,f]=r.useState(0),[u,h]=r.useState(0),[b,S]=r.useState();r.useEffect(()=>{a===WebSocket.OPEN&&S(setTimeout(()=>{p(Math.floor(Math.random()*300+120)),f(Math.floor(Math.random()*20)),h(Math.floor(Math.random()*40))},3e3))},[a,m,d,u]);const g=()=>{a===WebSocket.OPEN?(i(),clearTimeout(b)):a===WebSocket.CLOSED&&(n(),S(setTimeout(()=>{p(Math.floor(Math.random()*300+120)),f(Math.floor(Math.random()*20)),h(Math.floor(Math.random()*40))},3e3)))};return e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h3",className:"mb-4 text-primary font-heading",children:"Proxy Settings"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[e.jsxs(t.Typography,{color:"white",variant:"h5",children:["Connection Status: ",N]}),e.jsx(t.Button,{onClick:g,color:"red",variant:"text",children:a===WebSocket.OPEN?"Close":"Open"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(t.Typography,{color:"white",children:[e.jsx(U,{className:"h-8 w-8"}),"Ping: ",m," ms"]}),e.jsxs(t.Typography,{color:"white",children:[e.jsx(ne,{className:"h-8 w-8"}),"Sent data: ",d," kb"]}),e.jsxs(t.Typography,{color:"white",children:[e.jsx(oe,{className:"h-8 w-8"}),"Recieved data: ",u," kb"]})]})]}),e.jsx(t.Typography,{variant:"h3",className:"mt-6 mb-4 text-primary font-heading",children:"LoRa Settings"}),e.jsx(A,{})]})}),e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h3",className:"mb-4 text-primary font-heading",children:"Account Settings"}),e.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[e.jsxs(t.Typography,{color:"white",variant:"h5",children:["User Email: ",c&&c.email]}),e.jsx(t.Button,{onClick:l,color:"red",variant:"text",children:"Sign Out"})]}),e.jsx(A,{})]})})]})},Ke=""+new URL("dbelements/graphene.svg",import.meta.url).href,Ye=()=>{const[a,n]=r.useState(""),i=({target:s})=>n(s.value),c=[{shift:200,intensity:.0759},{shift:300,intensity:.1591},{shift:400,intensity:.4572},{shift:500,intensity:.8539},{shift:600,intensity:.9492}],o=[{imgPath:Ke,name:"Graphene",description:"Graphene is a building block of all graphitic carbon allotropes. It is a monatomic sheet formed by a network of sp2 carbons organized in a honeycomb structure."}];return e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 grid-flow-row-dense",children:[e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Data Graph"}),e.jsx("div",{className:"w-full h-96 my-6",children:e.jsx(ve,{children:e.jsxs(be,{data:c,children:[e.jsx(Ce,{type:"monotone",dataKey:"intensity",stroke:"#29EB18"}),e.jsx(we,{stroke:"#ccc",strokeDasharray:"5 5"}),e.jsx(Se,{dataKey:"shift"}),e.jsx(ke,{}),e.jsx(Le,{})]})})}),e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Result"}),e.jsx(A,{})]})}),e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Elements Database"}),e.jsx("div",{className:"w-full my-6",children:e.jsxs("div",{className:"shadow-md rounded-lg px-3 py-2 mb-4",children:[e.jsxs("div",{className:"flex items-center rounded-md",children:[e.jsx(t.Input,{color:"white",label:"Name of elements",value:a,onChange:i,containerProps:{className:"min-w-0"}}),e.jsx(t.Button,{color:a?"gray":"white",disabled:!a,children:"Search"})]}),e.jsx(t.List,{className:"py-3 text-sm",children:o.length?o.map((s,l)=>e.jsxs(t.ListItem,{children:[e.jsx(t.ListItemPrefix,{children:e.jsx(t.Avatar,{alt:s.name,src:s.imgPath})}),e.jsxs("div",{className:"ml-4",children:[e.jsx(t.Typography,{variant:"h6",color:"white",children:s.name}),e.jsx(t.Typography,{variant:"small",color:"white",className:"font-normal",children:s.description})]})]},l)):e.jsx(t.Typography,{color:"white",className:"text-lg text-center",children:"No waypoints on the map"})})]})})]})})]})},Ve=()=>{const{user:a,signIn:n}=M(),i=H();if(a)return e.jsx(Z,{to:"/"});const[c,o]=r.useState(""),[s,l]=r.useState(""),[N,m]=r.useState(""),p=async d=>{if(d.preventDefault(),m(""),c===""||s===""){m("Please fill out the form");return}try{await n(c,s),i("/")}catch(f){m(f.message)}};return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs(t.Card,{className:"bg-secondary p-8",shadow:!1,children:[e.jsx(t.Typography,{variant:"h2",className:"text-primary text-center",children:"Sign In"}),e.jsxs("form",{onSubmit:p,className:"mt-8 mb-2 w-80 max-w-screen-lg sm:w-96",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-6",children:[e.jsx(t.Input,{color:"white",type:"email",size:"lg",label:"Email",onChange:d=>o(d.target.value)}),e.jsx(t.Input,{color:"white",type:"password",size:"lg",label:"Password",onChange:d=>l(d.target.value)})]}),e.jsx(t.Button,{type:"submit",className:"mt-6 bg-primary text-secondary",fullWidth:!0,children:"Login"})]}),N&&e.jsx(t.Typography,{variant:"small",color:"red",children:N})]})})},Xe=""+new URL("../logo.png",import.meta.url).href,qe=D({key:"connectionTypeState",default:"proxy"}),Qe=()=>{const a=P(_),n=P(qe);return e.jsxs(t.Navbar,{className:"border-none bg-[#222629] h-max max-w-full py-2 px-4 lg:px-8 lg:py-4 grid grid-cols-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{className:"h-16",src:Xe,alt:"Logo"}),e.jsx("div",{className:"ml-4",children:e.jsxs("h4",{children:["Nazarbayev ",e.jsxs("span",{className:"text-primary",children:["University",e.jsx("br",{}),"Rover"]})," Team"]})})]}),e.jsx("div",{className:"h-16 flex items-center justify-center",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"mr-4",children:e.jsxs("ul",{className:"mb-4 mt-2 flex gap-2 lg:mb-0 lg:mt-0 lg:items-center lg:gap-6",children:[e.jsx("li",{children:e.jsx(R,{to:"/",className:({isActive:i})=>i?"text-primary":"",children:e.jsx(ce,{className:"h-8 w-8"})})}),e.jsx("li",{children:e.jsx(R,{to:"/command",className:({isActive:i})=>i?"text-primary":"",children:e.jsx(ie,{className:"h-8 w-8"})})}),e.jsx("li",{children:e.jsx(R,{to:"/lab",className:({isActive:i})=>i?"text-primary":"",children:e.jsx(le,{className:"h-8 w-8"})})}),e.jsx("li",{children:e.jsx(R,{to:"/settings",className:({isActive:i})=>i?"text-primary":"",children:e.jsx(de,{className:"h-8 w-8"})})})]})})})}),e.jsxs("div",{className:"flex items-center justify-end",children:[e.jsxs("div",{className:"mr-4 flex items-center",children:[e.jsx("p",{className:"mr-2",children:"100 %"}),e.jsx(me,{className:"h-8 w-8"})]}),e.jsx("div",{className:"mr-4 flex items-center",children:a?e.jsx("div",{className:"",children:e.jsx(Ee,{className:"h-8 w-8"})}):e.jsx("div",{className:"",children:e.jsx(Te,{className:"h-8 w-8"})})}),n==="proxy"?e.jsx("div",{className:"",children:e.jsx(he,{className:"h-8 w-8"})}):e.jsx("div",{className:"",children:e.jsx(U,{className:"h-8 w-8"})})]})]})},$e=()=>{const{user:a}=M();return a?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{}),e.jsx(je,{})]}):e.jsx(Z,{to:"/login"})};function et(){return e.jsx(Me,{children:e.jsx(Be,{children:e.jsx(_e,{children:e.jsx("main",{className:"p-6",children:e.jsxs(Ne,{children:[e.jsxs(T,{element:e.jsx($e,{}),children:[e.jsx(T,{path:"/",Component:()=>e.jsx(We,{})}),e.jsx(T,{path:"/command",Component:()=>e.jsx(He,{})}),e.jsx(T,{path:"/settings",Component:()=>e.jsx(Ze,{})}),e.jsx(T,{path:"/lab",Component:()=>e.jsx(Ye,{})})]}),e.jsx(T,{path:"/login",Component:()=>e.jsx(Ve,{})})]})})})})})}Q.createRoot(document.getElementById("root")).render(e.jsx(z.StrictMode,{children:e.jsx(t.ThemeProvider,{children:e.jsx(Ie,{basename:"/console",children:e.jsx($,{children:e.jsx(et,{})})})})}));
