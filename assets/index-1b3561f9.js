import{r,j as e,R as J}from"./react-0c77c144.js";import{c as Q}from"./react-dom-964364ba.js";import{R as M,a as E,b as P,c as $}from"./recoil-30246499.js";import{r as t}from"./@material-tailwind-09403f25.js";import{r as ee}from"./randomcolor-38ee50fd.js";import{m as O}from"./mapbox-gl-8de1b415.js";import{d as te}from"./react-timer-hook-679e9270.js";import{P as se,a as re,A as ae,T as z,b as G,W as U,c as ne,d as oe,R as ce,C as ie,B as le,e as de,f as me,S as he}from"./@heroicons-3de99253.js";import{i as pe,g as ue,o as xe,s as ge,a as ye}from"./@firebase-78a613ce.js";import"./firebase-4eeb31d4.js";import{l as fe}from"./react-joystick-component-2aa7cd53.js";import{c as H,d as Z,O as je,e as Ne,f as T}from"./react-router-2a15238e.js";import{R as ve,L as be,a as Ce,C as we,X as Se,Y as ke,T as Le}from"./recharts-624c24e9.js";import{B as Te,A as Ie}from"./react-icons-0a8c3f43.js";import{N as R,B as Ee}from"./react-router-dom-c3df4f81.js";import"./@babel-87174ba5.js";import"./scheduler-765c72db.js";import"./classnames-cd41178b.js";import"./tailwind-merge-de5f6af3.js";import"./prop-types-14c30b34.js";import"./deepmerge-89e33937.js";import"./framer-motion-3ab52292.js";import"./tslib-b2c16c9a.js";import"./hey-listen-52bbde7e.js";import"./style-value-types-86c13b32.js";import"./popmotion-413bcd9d.js";import"./framesync-409e5dda.js";import"./@motionone-95e9e256.js";import"./@emotion-cde29e94.js";import"./material-ripple-effects-ffa693ae.js";import"./@floating-ui-6cb3404f.js";import"./idb-81bdbf9b.js";import"./@remix-run-3c3b6866.js";import"./react-resize-detector-b39efbfc.js";import"./lodash-1234520e.js";import"./react-smooth-c290c57b.js";import"./fast-equals-a0711cdd.js";import"./victory-vendor-5e3e398c.js";import"./d3-scale-4cce9527.js";import"./internmap-7949acc8.js";import"./d3-array-7d9b19f9.js";import"./d3-time-format-aa787c71.js";import"./d3-time-9ce187c0.js";import"./d3-interpolate-8fa1f6ff.js";import"./d3-color-6502c434.js";import"./d3-format-ffdb8652.js";import"./recharts-scale-170b47f7.js";import"./decimal.js-light-6fe16ef2.js";import"./react-is-e8e5dbb3.js";import"./d3-shape-9e788a4f.js";import"./d3-path-41c4cb36.js";import"./reduce-css-calc-b30b9425.js";import"./css-unit-converter-9e08bb2c.js";import"./eventemitter3-40d30422.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();const F=M({key:"waypointState",default:[]});O.accessToken="pk.eyJ1IjoiYmF0eXJraCIsImEiOiJjbGljcHo3ZDAwcTNlM2V0ZTRtemk1ODRmIn0.t-G-2NoT-mvCYOpK-FTLjA";const Re=({longitude:n,latitude:a})=>{const o=r.useRef(null),c=r.useRef(null),[i,s]=r.useState(n),[d,N]=r.useState(a),[m,u]=r.useState(16),[l,y]=E(F),[h,x]=r.useState(),[v,S]=r.useState([]),g=()=>{v.length&&(v.forEach(C=>{C.remove()}),S([]))},f=C=>{y(w=>[...w,C])};r.useEffect(()=>{c.current||(c.current=new O.Map({container:o.current,style:"mapbox://styles/mapbox/light-v11",center:[i,d],zoom:m}),c.current.on("move",()=>{s(c.current.getCenter().lng.toFixed(4)),N(c.current.getCenter().lat.toFixed(4)),u(c.current.getZoom().toFixed(2))}),x(new O.Marker({color:"white"}).setLngLat([i,d]).addTo(c.current)),c.current.on("contextmenu",C=>f({latitude:C.lngLat.lat,longitude:C.lngLat.lng,color:ee()})))});const b=(C,w)=>{y(I=>{let L=[...I];return L[C]=w,L})};return r.useEffect(()=>{c.current&&(h==null||h.setLngLat([n,a]))},[n,a]),r.useEffect(()=>{if(!c.current)return;(()=>{g(),l.forEach((w,I)=>{let L=new O.Marker({color:w==null?void 0:w.color}).setDraggable(!0).setLngLat([w.longitude,w.latitude]).addTo(c.current);L.on("dragend",()=>{let p=L.getLngLat(),j={latitude:p.lat,longitude:p.lng,color:w==null?void 0:w.color};b(I,j)}),S(p=>[...p,L])})})()},[l]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-800 text-xs text-white px-1.5 py-3 z-10 absolute m-3 rounded",children:["Latitude: ",d," | Longitude: ",i," | Zoom: ",m]}),e.jsx("div",{ref:o,className:"h-[500px]"})]})},Oe=()=>{const{seconds:n,minutes:a,hours:o,isRunning:c,start:i,pause:s,reset:d}=te.useStopwatch({autoStart:!1});return e.jsxs("div",{className:"text-center text-white",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs(t.Typography,{variant:"h1",children:[o.toString().padStart(2,"0"),":",a.toString().padStart(2,"0"),":",n.toString().padStart(2,"0")]}),e.jsx(t.Typography,{variant:"paragraph",children:"HH:MM:SS"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[c?e.jsx(t.Button,{variant:"outlined",color:"white",className:"flex items-center",onClick:s,children:e.jsx(re,{strokeWidth:2,className:"h-5 w-5"})}):e.jsx(t.Button,{variant:"outlined",color:"white",className:"flex items-center",onClick:i,children:e.jsx(se,{strokeWidth:2,className:"h-5 w-5"})}),e.jsx(t.Button,{variant:"outlined",color:"white",className:"flex items-center",onClick:()=>d(null,!1),children:e.jsx(ae,{strokeWidth:2,className:"h-5 w-5"})})]})]})},Pe={apiKey:"AIzaSyB6lJ4-btPJrun3egZ-OHVB2x_GHqON080",authDomain:"consolecsi-auth.firebaseapp.com",projectId:"consolecsi-auth",storageBucket:"consolecsi-auth.appspot.com",messagingSenderId:"1060020195005",appId:"1:1060020195005:web:16f958fcfde05c891bb1d4"},Me=pe(Pe),W=ue(Me),K=r.createContext(),De=({children:n})=>{const[a,o]=r.useState({}),c=(s,d)=>ge(W,s,d),i=()=>ye(W);return r.useEffect(()=>{const s=xe(W,d=>{o(d)});return()=>{s()}},[]),e.jsx(K.Provider,{value:{user:a,signIn:c,logout:i},children:n})},D=()=>r.useContext(K),Y=r.createContext(),Be=({children:n})=>{const{user:a}=D(),[o,c]=r.useState(WebSocket.CLOSED),[i,s]=r.useState(null),d=r.useRef(null),N=()=>{const y=new WebSocket("wss://mrbwjuh5n3.execute-api.eu-north-1.amazonaws.com/prod");y.onopen=()=>{c(y.OPEN)},y.onclose=()=>{c(y.CLOSED)},y.onmessage=h=>{let x=JSON.parse(h.data);console.log("got data obj: ",x),s(x)},d.current=y},m=()=>{(!d.current||d.current.readyState===WebSocket.CLOSED)&&N()},u=()=>{d.current&&d.current.readyState===WebSocket.OPEN&&d.current.close()},l=y=>{var x,v,S;let h={action:"send",message:JSON.stringify(y)};((x=d.current)==null?void 0:x.readyState)===((v=d.current)==null?void 0:v.OPEN)&&((S=d.current)==null||S.send(JSON.stringify(h)))};return r.useEffect(()=>{if(!(!a||!a.email))return m(),()=>{u()}},[a]),e.jsx(Y.Provider,{value:{readyState:o,data:i,sendMessage:l,openConnection:m,closeConnection:u},children:n})},B=()=>r.useContext(Y),We=()=>{const n={latitude:"51.090009",longitude:"71.398299"},{readyState:a,data:o}=B(),[c,i]=r.useState(n),[s,d]=r.useState({}),[N,m]=E(F),[u,l]=r.useState(""),[y,h]=r.useState(""),[x,v]=r.useState("#3FB1CE"),S=p=>{p.preventDefault(),u.length&&y.length&&m([...N,{latitude:u,longitude:y,color:x}]),l(""),h(""),p.target.reset()},g=p=>{let j=[...N];j.splice(p,1),m(j)},f=(p,j)=>{let k=[...N];k[p]=j,m(k)},b=r.useRef(),C=r.useRef(),w=(p,j)=>{b.current=j},I=(p,j)=>{C.current=j},L=p=>{const j=[...N],k=j[b.current];j.splice(b.current,1),j.splice(C.current,0,k),b.current=null,C.current=null,m(j)};return r.useEffect(()=>{var p,j;a===WebSocket.OPEN&&o&&o.gps&&((p=o.gps)==null?void 0:p.latitude)!=c.latitude&&((j=o.gps)==null?void 0:j.longitude)!=c.longitude&&i(o.gps)},[a,o]),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 grid-flow-row-dense",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 h-fit",children:[e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"IMU Data"}),e.jsxs(t.Typography,{color:"white",className:"text-xl",children:["Linear Acceleration: ",(s==null?void 0:s.linear_acceleration)??"0"]}),e.jsxs(t.Typography,{color:"white",className:"text-xl",children:["Angular Velocity: ",(s==null?void 0:s.angular_velocity)??"0"]}),e.jsxs(t.Typography,{color:"white",className:"text-xl",children:["Orientation: ",(s==null?void 0:s.orientation)??"NE"]})]})}),e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"text-primary font-heading text-center",children:"Stopwatch"}),e.jsx(Oe,{})]})}),e.jsx(t.Card,{className:"bg-secondary col-span-2",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Waypoints"}),e.jsx(t.List,{className:"h-64 overflow-y-auto",children:N.length?N.map((p,j)=>e.jsxs(t.ListItem,{ripple:!1,className:"py-1 pr-1 pl-4 text-white bg-[#474b4f]",draggable:!0,onDragStart:k=>w(k,j),onDragEnter:k=>I(k,j),onDragEnd:L,children:[e.jsxs("span",{className:"text-martian mr-2",children:["[",j+1,"]"]}),"Latitude: ",Number(p.latitude).toFixed(4),", Longitude: ",Number(p.longitude).toFixed(4),e.jsxs(t.ListItemSuffix,{className:"flex justify-center space-x-4",children:[e.jsx("input",{type:"color",value:p.color,onChange:k=>{let q={latitude:p.latitude,longitude:p.longitude,color:k.target.value};f(j,q)}}),e.jsx(t.IconButton,{variant:"text",color:"blue-gray",onClick:()=>g(j),children:e.jsx(z,{className:"h-5 w-5"})})]})]},j)):e.jsx(t.Typography,{color:"white",className:"text-lg text-center",children:"No waypoints on the map"})}),e.jsxs("form",{className:"mt-3 flex gap-2 items-center",onSubmit:S,children:[e.jsx(t.Input,{label:"Latitude",color:"white",onChange:p=>l(p.target.value)}),e.jsx(t.Input,{label:"Longitude",color:"white",onChange:p=>h(p.target.value)}),e.jsx(t.Input,{label:"Color",color:"white",type:"color",value:x,onChange:p=>v(p.target.value),containerProps:{className:"max-w-[100px]"}}),e.jsx(t.Button,{className:"col-span-3",type:"submit",color:"green",children:e.jsx(G,{className:"h-4"})})]})]})})]}),e.jsx("div",{className:"grid grid-rows-1 gap-4",children:e.jsx(t.Card,{className:"bg-secondary ",children:e.jsxs(t.CardBody,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Location"})}),e.jsx(Re,{latitude:c.latitude,longitude:c.longitude}),e.jsxs(t.Typography,{className:"mt-4 text-center",color:"white",children:["Rover's Location (",c.latitude,", ",c.longitude,")"]})]})})})]})},V=M({key:"receiveFootageState",default:!0}),Ae=({mediaStream:n})=>{const a=r.useRef(null),o=P(V);return r.useEffect(()=>{a.current&&(n!==null?a.current.srcObject=n:a.current.srcObject&&n===null&&(a.current.srcObject.getTracks().forEach(c=>c.stop()),a.current.srcObject=null))},[n]),o&&n?e.jsx("video",{autoPlay:!0,controls:!0,ref:a}):e.jsx("div",{className:"h-[480px] w-full bg-black flex justify-center items-center",children:o?e.jsx(t.Typography,{variant:"h3",className:"text-primary",children:"No Footage From Cameras"}):e.jsx(t.Typography,{variant:"h3",className:"text-primary",children:"Footage Receival is turned off"})})},Fe=()=>{const{sendMessage:n}=B(),a=new Map([["W",87],["A",65],["S",83],["D",68]]),[o,c]=r.useState({x:0,y:0});let i={};const s=m=>{let u={x:m.x,y:m.y};i.x===u.x&&i.y===u.y||(i=u,n({control:u}))},d=m=>{let u=m.keyCode,l={x:0,y:0};switch(u){case a.get("W"):l.x=0,l.y=1;break;case a.get("A"):l.x=-1,l.y=0;break;case a.get("S"):l.x=0,l.y=-1;break;case a.get("D"):l.x=1,l.y=0;break}c(l),(l.x||l.y)&&s({x:l.x,y:l.y})},N=m=>{let u=m.keyCode;(u===87||u===65||u===83||u===68)&&(c({x:0,y:0}),s({x:0,y:0}))};return r.useEffect(()=>(document.addEventListener("keydown",d),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keyup",N)}),[]),e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-4 text-primary font-heading",children:"Manual Control"}),e.jsxs("div",{className:"flex flex-col gap-4 items-center my-2",children:[e.jsx(fe.Joystick,{pos:o,size:100,stickSize:50,baseColor:"black",stickColor:"#29EB18",move:s}),e.jsx(t.Typography,{color:"white",children:"Movement"}),e.jsxs(t.Typography,{color:"white",children:["Forward - [W], Backward - [S]",e.jsx("br",{}),"Left - [A], Right - [D]"]})]})]})})},X=r.createContext(),_e=({children:n})=>{const{readyState:a,data:o,sendMessage:c}=B(),[i,s]=r.useState(null),[d,N]=r.useState(null),[m,u]=r.useState(),l=r.useRef(null),y=h=>{s(h)};return r.useEffect(()=>{const h=new RTCPeerConnection({iceServers:[]});return h.onicecandidate=function(x){let v=x.candidate;v?(c({webrtc_candidate:v}),console.log(v.candidate)):console.log(`iceGatheringState complete
`,l.current.localDescription.sdp)},h.oniceconnectionstatechange=function(){u(l.current.iceConnectionState)},h.ontrack=function(x){console.log("remote ontrack",x.streams),N(x.streams[0])},h.onconnection=function(x){console.log("onconnection ",x)},l.current=h,()=>{l.current.close()}},[]),r.useEffect(()=>{if(a===WebSocket.OPEN&&o){if(o.webrtc_offer!=i)s(JSON.stringify(o.webrtc_offer));else if(o.webrtc_candidate){console.log("Received ICE candidate...");let h=JSON.parse(o.webrtc_candidate),x=new RTCIceCandidate({sdpMLineIndex:h.candidate.sdpMLineIndex,sdpMid:h.candidate.sdpMid,candidate:h.candidate.candidate});l.current.addIceCandidate(x)}}},[a,o]),r.useEffect(()=>{if(!l.current||!i)return;async function h(){let x=new RTCSessionDescription(JSON.parse(i));if(console.log(`remoteOffer 
`,x),await l.current.setRemoteDescription(x),x.type=="offer")try{let v=await l.current.createAnswer();console.log(`createAnswer 200 ok 
`,v),await l.current.setLocalDescription(v),c({webrtc_answer:v})}catch(v){console.error(v)}}h()},[i]),e.jsx(X.Provider,{value:{changeRemoteOffer:y,remoteStream:d,iceState:m},children:n})},Je=()=>r.useContext(X),_=M({key:"controlModeState",default:!1}),ze=({open:n,onClose:a,heading:o,text:c,onConfirm:i})=>n&&e.jsxs(t.Dialog,{open:n,handler:a,children:[e.jsx(t.DialogHeader,{children:o??"Confirmation"}),e.jsx(t.DialogBody,{children:c??"Do you confirm the action?"}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:a,className:"mr-1",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:()=>{a(),i()},children:e.jsx("span",{children:"Confirm"})})]})]}),Ge=()=>{const[n,a]=E(_),[o,c]=E(V),[i,s]=J.useState(!1),d=m=>{s(!0)},N=m=>{c(m.target.checked)};return e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{className:"flex flex-col gap-4",children:[e.jsx(t.Typography,{variant:"h4",className:"text-primary font-heading",children:"Configs"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ze,{open:i,onClose:()=>s(!1),onConfirm:()=>a(!n),heading:"Switch Control Mode?"}),e.jsx(t.Typography,{variant:"h5",color:"white",children:"Drive mode:"}),e.jsx(t.Typography,{color:"white",children:"Manual"}),e.jsx(t.Switch,{id:"control-mode-switch",checked:n,onChange:d,ripple:!1,className:"h-full w-full checked:bg-primary",containerProps:{className:"w-11 h-6"},circleProps:{className:"before:hidden left-0.5 border-none"}}),e.jsx(t.Typography,{color:"white",children:"Autonomous"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t.Typography,{variant:"h5",color:"white",children:"Receive camera footage:"}),e.jsx(t.Switch,{id:"recieve-footage-switch",checked:o,onChange:N,ripple:!1,className:"h-full w-full checked:bg-primary",containerProps:{className:"w-11 h-6"},circleProps:{className:"before:hidden left-0.5 border-none"}})]})]})})},Ue=()=>{const[n,a]=E(F),[o,c]=r.useState(""),[i,s]=r.useState(""),[d,N]=r.useState("#3FB1CE"),m=g=>{g.preventDefault(),o.length&&i.length&&a([...n,{latitude:o,longitude:i,color:d}]),c(""),s(""),g.target.reset()},u=g=>{let f=[...n];f.splice(g,1),a(f)},l=(g,f)=>{let b=[...n];b[g]=f,a(b)},y=r.useRef(),h=r.useRef(),x=(g,f)=>{y.current=f},v=(g,f)=>{h.current=f},S=g=>{const f=[...n],b=f[y.current];f.splice(y.current,1),f.splice(h.current,0,b),y.current=null,h.current=null,a(f)};return e.jsx(t.Card,{className:"bg-secondary col-span-2",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Waypoints"}),e.jsx(t.List,{className:"h-64 overflow-y-auto",children:n.length?n.map((g,f)=>e.jsxs(t.ListItem,{ripple:!1,className:"py-1 pr-1 pl-4 text-white bg-[#474b4f]",draggable:!0,onDragStart:b=>x(b,f),onDragEnter:b=>v(b,f),onDragEnd:S,children:[e.jsxs("span",{className:"text-martian mr-2",children:["[",f+1,"]"]}),"Latitude: ",Number(g.latitude).toFixed(4),", Longitude: ",Number(g.longitude).toFixed(4),e.jsxs(t.ListItemSuffix,{className:"flex justify-center space-x-4",children:[e.jsx("input",{type:"color",value:g.color,onChange:b=>{let C={latitude:g.latitude,longitude:g.longitude,color:b.target.value};l(f,C)}}),e.jsx(t.IconButton,{variant:"text",color:"blue-gray",onClick:()=>u(f),children:e.jsx(z,{className:"h-5 w-5"})})]})]},f)):e.jsx(t.Typography,{color:"white",className:"text-lg text-center",children:"No waypoints on the map"})}),e.jsxs("form",{className:"mt-3 flex gap-2 items-center",onSubmit:m,children:[e.jsx(t.Input,{label:"Latitude",color:"white",onChange:g=>c(g.target.value)}),e.jsx(t.Input,{label:"Longitude",color:"white",onChange:g=>s(g.target.value)}),e.jsx(t.Input,{label:"Color",color:"white",type:"color",value:d,onChange:g=>N(g.target.value),containerProps:{className:"max-w-[100px]"}}),e.jsx(t.Button,{className:"col-span-3",type:"submit",color:"green",children:e.jsx(G,{className:"h-4"})})]})]})})},He=()=>{const{remoteStream:n,iceState:a}=Je(),o=P(_);return r.useEffect(()=>{console.log("Ice state: "+a)},[a]),e.jsxs("div",{className:"mt-4 grid grid-cols-11 gap-4",children:[e.jsx("div",{className:"col-span-5",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(Ge,{}),o?e.jsx(Ue,{}):e.jsx(Fe,{})]})}),e.jsx("div",{className:"col-span-6",children:e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Main Camera"}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Ae,{mediaStream:n})})]})})})]})},A=()=>e.jsx(t.Card,{color:"gray",className:"",children:e.jsx(t.CardBody,{className:"flex justify-center items-center",children:e.jsx(t.Typography,{variant:"h4",color:"white",className:"font-heading",children:"Feature not yet implemented!"})})}),Ze=()=>{const{readyState:n,openConnection:a,closeConnection:o}=B(),{user:c,logout:i}=D(),s=H(),d=async()=>{try{await i(),s("/login")}catch(f){console.error(f)}},N={1:"OPEN",3:"CLOSED"}[n],[m,u]=r.useState(0),[l,y]=r.useState(0),[h,x]=r.useState(0),[v,S]=r.useState();r.useEffect(()=>{n===WebSocket.OPEN&&S(setTimeout(()=>{u(Math.floor(Math.random()*300+120)),y(Math.floor(Math.random()*20)),x(Math.floor(Math.random()*40))},3e3))},[n,m,l,h]);const g=()=>{n===WebSocket.OPEN?(o(),clearTimeout(v)):n===WebSocket.CLOSED&&(a(),S(setTimeout(()=>{u(Math.floor(Math.random()*300+120)),y(Math.floor(Math.random()*20)),x(Math.floor(Math.random()*40))},3e3)))};return e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h3",className:"mb-4 text-primary font-heading",children:"Proxy Settings"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[e.jsxs(t.Typography,{color:"white",variant:"h5",children:["Connection Status: ",N]}),e.jsx(t.Button,{onClick:g,color:"red",variant:"text",children:n===WebSocket.OPEN?"Close":"Open"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(t.Typography,{color:"white",children:[e.jsx(U,{className:"h-8 w-8"}),"Ping: ",m," ms"]}),e.jsxs(t.Typography,{color:"white",children:[e.jsx(ne,{className:"h-8 w-8"}),"Sent data: ",l," kb"]}),e.jsxs(t.Typography,{color:"white",children:[e.jsx(oe,{className:"h-8 w-8"}),"Recieved data: ",h," kb"]})]})]}),e.jsx(t.Typography,{variant:"h3",className:"mt-6 mb-4 text-primary font-heading",children:"LoRa Settings"}),e.jsx(A,{})]})}),e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h3",className:"mb-4 text-primary font-heading",children:"Account Settings"}),e.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[e.jsxs(t.Typography,{color:"white",variant:"h5",children:["User Email: ",c&&c.email]}),e.jsx(t.Button,{onClick:d,color:"red",variant:"text",children:"Sign Out"})]}),e.jsx(A,{})]})})]})},Ke=""+new URL("dbelements/graphene.svg",import.meta.url).href,Ye=()=>{const[n,a]=r.useState(""),o=({target:s})=>a(s.value),c=[{shift:200,intensity:.0759},{shift:300,intensity:.1591},{shift:400,intensity:.4572},{shift:500,intensity:.8539},{shift:600,intensity:.9492}],i=[{imgPath:Ke,name:"Graphene",description:"Graphene is a building block of all graphitic carbon allotropes. It is a monatomic sheet formed by a network of sp2 carbons organized in a honeycomb structure."}];return e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 grid-flow-row-dense",children:[e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Data Graph"}),e.jsx("div",{className:"w-full h-96 my-6",children:e.jsx(ve,{children:e.jsxs(be,{data:c,children:[e.jsx(Ce,{type:"monotone",dataKey:"intensity",stroke:"#29EB18"}),e.jsx(we,{stroke:"#ccc",strokeDasharray:"5 5"}),e.jsx(Se,{dataKey:"shift"}),e.jsx(ke,{}),e.jsx(Le,{})]})})}),e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Result"}),e.jsx(A,{})]})}),e.jsx(t.Card,{className:"bg-secondary",children:e.jsxs(t.CardBody,{children:[e.jsx(t.Typography,{variant:"h4",className:"mb-2 text-primary font-heading",children:"Elements Database"}),e.jsx("div",{className:"w-full my-6",children:e.jsxs("div",{className:"shadow-md rounded-lg px-3 py-2 mb-4",children:[e.jsxs("div",{className:"flex items-center rounded-md",children:[e.jsx(t.Input,{color:"white",label:"Name of elements",value:n,onChange:o,containerProps:{className:"min-w-0"}}),e.jsx(t.Button,{color:n?"gray":"white",disabled:!n,children:"Search"})]}),e.jsx(t.List,{className:"py-3 text-sm",children:i.length?i.map((s,d)=>e.jsxs(t.ListItem,{children:[e.jsx(t.ListItemPrefix,{children:e.jsx(t.Avatar,{alt:s.name,src:s.imgPath})}),e.jsxs("div",{className:"ml-4",children:[e.jsx(t.Typography,{variant:"h6",color:"white",children:s.name}),e.jsx(t.Typography,{variant:"small",color:"white",className:"font-normal",children:s.description})]})]},d)):e.jsx(t.Typography,{color:"white",className:"text-lg text-center",children:"No waypoints on the map"})})]})})]})})]})},Ve=()=>{const{user:n,signIn:a}=D(),o=H();if(n)return e.jsx(Z,{to:"/"});const[c,i]=r.useState(""),[s,d]=r.useState(""),[N,m]=r.useState(""),u=async l=>{if(l.preventDefault(),m(""),c===""||s===""){m("Please fill out the form");return}try{await a(c,s),o("/")}catch(y){m(y.message)}};return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs(t.Card,{className:"bg-secondary p-8",shadow:!1,children:[e.jsx(t.Typography,{variant:"h2",className:"text-primary text-center",children:"Sign In"}),e.jsxs("form",{onSubmit:u,className:"mt-8 mb-2 w-80 max-w-screen-lg sm:w-96",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-6",children:[e.jsx(t.Input,{color:"white",type:"email",size:"lg",label:"Email",onChange:l=>i(l.target.value)}),e.jsx(t.Input,{color:"white",type:"password",size:"lg",label:"Password",onChange:l=>d(l.target.value)})]}),e.jsx(t.Button,{type:"submit",className:"mt-6 bg-primary text-secondary",fullWidth:!0,children:"Login"})]}),N&&e.jsx(t.Typography,{variant:"small",color:"red",children:N})]})})},Xe=""+new URL("../logo.png",import.meta.url).href,qe=M({key:"connectionTypeState",default:"proxy"}),Qe=()=>{const n=P(_),a=P(qe);return e.jsxs(t.Navbar,{className:"border-none bg-[#222629] h-max max-w-full py-2 px-4 lg:px-8 lg:py-4 grid grid-cols-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{className:"h-16",src:Xe,alt:"Logo"}),e.jsx("div",{className:"ml-4",children:e.jsxs("h4",{children:["Nazarbayev ",e.jsxs("span",{className:"text-primary",children:["University",e.jsx("br",{}),"Rover"]})," Team"]})})]}),e.jsx("div",{className:"h-16 flex items-center justify-center",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"mr-4",children:e.jsxs("ul",{className:"mb-4 mt-2 flex gap-2 lg:mb-0 lg:mt-0 lg:items-center lg:gap-6",children:[e.jsx("li",{children:e.jsx(R,{to:"/",className:({isActive:o})=>o?"text-primary":"",children:e.jsx(ce,{className:"h-8 w-8"})})}),e.jsx("li",{children:e.jsx(R,{to:"/command",className:({isActive:o})=>o?"text-primary":"",children:e.jsx(ie,{className:"h-8 w-8"})})}),e.jsx("li",{children:e.jsx(R,{to:"/lab",className:({isActive:o})=>o?"text-primary":"",children:e.jsx(le,{className:"h-8 w-8"})})}),e.jsx("li",{children:e.jsx(R,{to:"/settings",className:({isActive:o})=>o?"text-primary":"",children:e.jsx(de,{className:"h-8 w-8"})})})]})})})}),e.jsxs("div",{className:"flex items-center justify-end",children:[e.jsxs("div",{className:"mr-4 flex items-center",children:[e.jsx("p",{className:"mr-2",children:"100 %"}),e.jsx(me,{className:"h-8 w-8"})]}),e.jsx("div",{className:"mr-4 flex items-center",children:n?e.jsx("div",{className:"",children:e.jsx(Ie,{className:"h-8 w-8"})}):e.jsx("div",{className:"",children:e.jsx(Te,{className:"h-8 w-8"})})}),a==="proxy"?e.jsx("div",{className:"",children:e.jsx(he,{className:"h-8 w-8"})}):e.jsx("div",{className:"",children:e.jsx(U,{className:"h-8 w-8"})})]})]})},$e=()=>{const{user:n}=D();return n?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{}),e.jsx(je,{})]}):e.jsx(Z,{to:"/login"})};function et(){return e.jsx(De,{children:e.jsx(Be,{children:e.jsx(_e,{children:e.jsx("main",{className:"p-6",children:e.jsxs(Ne,{children:[e.jsxs(T,{element:e.jsx($e,{}),children:[e.jsx(T,{path:"/",Component:()=>e.jsx(We,{})}),e.jsx(T,{path:"/command",Component:()=>e.jsx(He,{})}),e.jsx(T,{path:"/settings",Component:()=>e.jsx(Ze,{})}),e.jsx(T,{path:"/lab",Component:()=>e.jsx(Ye,{})})]}),e.jsx(T,{path:"/login",Component:()=>e.jsx(Ve,{})})]})})})})})}Q.createRoot(document.getElementById("root")).render(e.jsx(J.StrictMode,{children:e.jsx(t.ThemeProvider,{children:e.jsx(Ee,{basename:"/console",children:e.jsx($,{children:e.jsx(et,{})})})})}));
